# ‚öôÔ∏è –Ü–≥—Ä–æ–≤—ñ –ú–µ—Ö–∞–Ω—ñ–∫–∏ —Ç–∞ –°–∏—Å—Ç–µ–º–∏ (Game Mechanics)

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î, —è–∫ –ø—Ä–∞—Ü—é—é—Ç—å –∫–ª—é—á–æ–≤—ñ —Å–∏—Å—Ç–µ–º–∏ –¥–æ–¥–∞—Ç–∫—É "AI Dungeon Master".

---

## 1. –®—Ç—É—á–Ω–∏–π –Ü–Ω—Ç–µ–ª–µ–∫—Ç (The AI DM)

–†–æ–ª—å –ú–∞–π—Å—Ç—Ä–∞ –ü—ñ–¥–∑–µ–º–µ–ª—å –≤–∏–∫–æ–Ω—É—î –º–æ–¥–µ–ª—å **Gemini 2.5/3.0**. –í–æ–Ω–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≥–µ–Ω–µ—Ä—É—î —Ç–µ–∫—Å—Ç, –∞ –∫–µ—Ä—É—î —Å—Ç–∞–Ω–æ–º –≥—Ä–∏ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É **Function Calling (Tools)**.

### üß† –õ–æ–≥—ñ–∫–∞ –º–∏—Å–ª–µ–Ω–Ω—è
1. **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –®–Ü –æ—Ç—Ä–∏–º—É—î —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç –∑ –ø—Ä–∞–≤–∏–ª–∞–º–∏ D&D 5e (SRD), –ø–æ—Ç–æ—á–Ω–∏–º —Å—Ç–∞–Ω–æ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (HP, AC, –ö–ª–∞—Å) —Ç–∞ –∫–æ—Ä–æ—Ç–∫–∏–º –ø—ñ–¥—Å—É–º–∫–æ–º –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –ø–æ–¥—ñ–π.
2. **–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ (Tools):** –®–Ü –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ —Ñ—É–Ω–∫—Ü—ñ–π, —è–∫—ñ –∑–º—ñ–Ω—é—é—Ç—å —Å—Ç–∞–Ω React-–¥–æ–¥–∞—Ç–∫—É:
   - `update_hp`: –ó–º—ñ–Ω—é—î –∑–¥–æ—Ä–æ–≤'—è (–ª—ñ–∫—É–≤–∞–Ω–Ω—è/—à–∫–æ–¥–∞).
   - `modify_inventory`: –î–æ–¥–∞—î/–≤–∏–¥–∞–ª—è—î –ø—Ä–µ–¥–º–µ—Ç–∏.
   - `request_roll`: –ó—É–ø–∏–Ω—è—î –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é —Ç–∞ –≤–∏–º–∞–≥–∞—î –≤—ñ–¥ –≥—Ä–∞–≤—Ü—è –∫–∏–¥–∫–∞ –∫—É–±–∏–∫–∞ (Check/Save).
   - `update_location`: –ó–º—ñ–Ω—é—î –ª–æ–∫–∞—Ü—ñ—é —Ç–∞ –∑–∞–ø—É—Å–∫–∞—î –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó.
   - `manage_combat`: –í—ñ–¥–∫—Ä–∏–≤–∞—î/–∑–∞–∫—Ä–∏–≤–∞—î –±–æ–π–æ–≤–∏–π —Ç—Ä–µ–∫–µ—Ä.
3. **–ß–µ—Ä–≥–∞ –∑–∞–ø–∏—Ç—ñ–≤ (Request Queue):** –í—Å—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ API (—Ç–µ–∫—Å—Ç, –∫–∞—Ä—Ç–∏–Ω–∫–∏, –∞–Ω–∞–ª—ñ–∑) —Å—Ç–∞—é—Ç—å —É —á–µ—Ä–≥—É (`Promise Chain`), —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –ø–æ–º–∏–ª–æ–∫ `429 Too Many Requests` –∞–±–æ `503 Overloaded`.

### üìù –ü–∞–º'—è—Ç—å (Context Window Management)
–©–æ–± –Ω–µ –ø–µ—Ä–µ–ø–æ–≤–Ω–∏—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–µ –≤—ñ–∫–Ω–æ –º–æ–¥–µ–ª—ñ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –º–µ—Ö–∞–Ω—ñ–∑–º "–∫–æ–≤–∑–∞—é—á–æ–≥–æ –≤—ñ–∫–Ω–∞":
- –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –æ—Å—Ç–∞–Ω–Ω—ñ ~20-50 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —á–∞—Ç—É.
- –°—Ç–∞—Ä—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ —Å—Ç–∏—Å–∫–∞—é—Ç—å—Å—è —É **Story Summary** (—Ç–µ–∫—Å—Ç–æ–≤–∏–π –ø—ñ–¥—Å—É–º–æ–∫), —è–∫–∏–π –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç.

---

## 2. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–∞ –†–æ–∑–≤–∏—Ç–æ–∫ –ü–µ—Ä—Å–æ–Ω–∞–∂–∞

–°–∏—Å—Ç–µ–º–∞ –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –ø—Ä–µ—Å–µ—Ç–∞—Ö (Presets) –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Å—Ç–∞—Ä—Ç—É, –∞–ª–µ –¥–æ–∑–≤–æ–ª—è—î –ø–æ–≤–Ω–µ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è.

### üìä –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (Stats)
- **Base Stats:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **Standard Array** (15, 14, 13, 12, 10, 8). –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç —Ä–æ–∑–ø–æ–¥—ñ–ª—É –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –æ–±—Ä–∞–Ω–æ–≥–æ –ö–ª–∞—Å—É.
- **Racial Bonuses:** –î–æ –±–∞–∑–æ–≤–∏—Ö —Å—Ç–∞—Ç—ñ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—é—Ç—å—Å—è –±–æ–Ω—É—Å–∏ –†–∞—Å–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ï–ª—å—Ñ +2 DEX).
- **Derived Stats:**
  - **HP:** –†–æ–∑—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è —è–∫ `Hit Die + Constitution Mod`.
  - **AC:** –ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ —Ç–∏–ø—ñ –±—Ä–æ–Ω—ñ –∫–ª–∞—Å—É (Light/Medium/Heavy/Unarmored) + DEX mod.
  - **Spell Slots:** –°–ø—Ä–æ—â–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü—è –ø—Ä–æ–≥—Ä–µ—Å—ñ—ó –¥–ª—è –ø–æ–≤–Ω–∏—Ö –∫–∞—Å—Ç–µ—Ä—ñ–≤ (Full Casters).

---

## 3. –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ –ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ—ñ—è (Map & Vision)

–¶–µ –æ–¥–Ω–∞ –∑ –Ω–∞–π—Å–∫–ª–∞–¥–Ω—ñ—à–∏—Ö —Å–∏—Å—Ç–µ–º, —â–æ –ø–æ—î–¥–Ω—É—î –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –∑–æ–±—Ä–∞–∂–µ–Ω—å —Ç–∞ –∫–æ–º–ø'—é—Ç–µ—Ä–Ω–∏–π –∑—ñ—Ä.

### üé® –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –õ–æ–∫–∞—Ü—ñ—ó
1. –®–Ü –≤–∏–∫–ª–∏–∫–∞—î `update_location` –∑ —Ç–µ–∫—Å—Ç–æ–≤–∏–º –æ–ø–∏—Å–æ–º.
2. –û–ø–∏—Å –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ –º–æ–¥–µ–ª—å **Imagen** (—á–µ—Ä–µ–∑ Gemini) –∑ –ø—Ä–æ–º–ø—Ç–æ–º "Top-down Battle Map".
3. –û—Ç—Ä–∏–º–∞–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è —è–∫ —Ñ–æ–Ω `BattleMap`.

### üëÅÔ∏è –ê–Ω–∞–ª—ñ–∑ –ü–µ—Ä–µ—à–∫–æ–¥ (AI Vision)
–ü—ñ—Å–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∫–∞—Ä—Ç–∏–Ω–∫–∏, –≤–æ–Ω–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –Ω–∞–∑–∞–¥ —É Gemini Vision –∑ –ø—Ä–æ–º–ø—Ç–æ–º "–ó–Ω–∞–π–¥–∏ —Å—Ç—ñ–Ω–∏ —Ç–∞ –æ–±'—î–∫—Ç–∏ –Ω–∞ —Å—ñ—Ç—Ü—ñ 20x15".
- –®–Ü –ø–æ–≤–µ—Ä—Ç–∞—î JSON –∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –æ–±'—î–∫—Ç—ñ–≤.
- –î–æ–¥–∞—Ç–æ–∫ —Å—Ç–≤–æ—Ä—é—î –Ω–µ–≤–∏–¥–∏–º—ñ (–∞–±–æ –≤–∏–¥–∏–º—ñ) –æ–±'—î–∫—Ç–∏ —Ç–∏–ø—É `wall`, `tree`, `door`, —è–∫—ñ –±–ª–æ–∫—É—é—Ç—å –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤.

### ‚ôüÔ∏è –°—ñ—Ç–∫–∞ —Ç–∞ –¢–æ–∫–µ–Ω–∏
- **–†–æ–∑–º—ñ—Ä:** 5 —Ñ—É—Ç—ñ–≤ (1 –∫–ª—ñ—Ç–∏–Ω–∫–∞).
- **–ü–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è:** Drag & Drop.
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–∏—Å—Ç–∞–Ω—Ü—ñ—ó (`Math.max(|dx|, |dy|) * 5`).
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è –∑ –æ–±'—î–∫—Ç–∞–º–∏ (`isPassable: false`).
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–∏—à–∫—É —Ä—É—Ö—É –≤ –±–æ—é.

---

## 4. –ë–æ–π–æ–≤–∞ –°–∏—Å—Ç–µ–º–∞ (Combat System)

–î–æ–¥–∞—Ç–æ–∫ –ø—ñ–¥—Ç—Ä–∏–º—É—î –¥–≤–∞ —Ä–µ–∂–∏–º–∏ –≥—Ä–∏: **Exploration** (–î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è) —Ç–∞ **Combat** (–ë—ñ–π).

### ‚öîÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –•–æ–¥—É (Turn-Based)
–ö–æ–ª–∏ –∞–∫—Ç–∏–≤–Ω–∏–π –±—ñ–π (`combatState.isActive = true`):
1. **–Ü–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∞:** –°–æ—Ä—Ç—É—î —É—á–∞—Å–Ω–∏–∫—ñ–≤ –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º —ñ–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∏.
2. **–†–µ—Å—É—Ä—Å–∏ –•–æ–¥—É:**
   - **Action (–î—ñ—è):** –ê—Ç–∞–∫–∞, –ó–∞–∫–ª—è—Ç—Ç—è, –†–∏–≤–æ–∫ (Dash).
   - **Bonus Action:** –ó—ñ–ª–ª—è, —à–≤–∏–¥–∫—ñ —á–∞—Ä–∏.
   - **Movement:** –û–±–º–µ–∂–µ–Ω–∏–π —à–≤–∏–¥–∫—ñ—Å—Ç—é –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 30ft).
3. **–û–±–º–µ–∂–µ–Ω–Ω—è:** –ì—Ä–∞–≤–µ—Ü—å –Ω–µ –º–æ–∂–µ —Ä—É—Ö–∞—Ç–∏ —Ç–æ–∫–µ–Ω –∞–±–æ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥—ñ—ó, —è–∫—â–æ –∑–∞—Ä–∞–∑ –Ω–µ –π–æ–≥–æ —Ö—ñ–¥.

### üõ°Ô∏è –î—ñ—ó (Actions Panel)
- **Attack:** –í—ñ–¥–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∑—ñ –∑–±—Ä–æ—î—é –∑ —ñ–Ω–≤–µ–Ω—Ç–∞—Ä—è.
- **Spell:** –í—ñ–¥–∫—Ä–∏–≤–∞—î —Å–ø–∏—Å–æ–∫ –∑–∞–∫–ª—è—Ç—å —Ç–∞ —Ç—Ä–µ–∫–µ—Ä —á–∞—Ä—É–Ω–æ–∫ (Slots).
- **Dash:** –ü–æ–¥–≤–æ—é—î –¥–æ—Å—Ç—É–ø–Ω–∏–π —Ä—É—Ö –Ω–∞ —Ü–µ–π —Ö—ñ–¥.
- **Potion:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –±–æ–Ω—É—Å-–¥—ñ—é –¥–ª—è –ª—ñ–∫—É–≤–∞–Ω–Ω—è.

---

## 5. –ú–µ—Ä–µ–∂–µ–≤–∞ –ì—Ä–∞ (P2P Multiplayer)

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—è **WebRTC (PeerJS)** –¥–ª—è –ø—Ä—è–º–æ–≥–æ –∑'—î–¥–Ω–∞–Ω–Ω—è –±—Ä–∞—É–∑–µ—Ä—ñ–≤ –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —ñ–≥—Ä–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

### üåê –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ Host-Client
- **HOST (–ú–∞–π—Å—Ç–µ—Ä/–°–µ—Ä–≤–µ—Ä):**
  - –¢—Ä–∏–º–∞—î "—ñ—Å—Ç–∏–Ω—É" —Å—Ç–∞–Ω—É –≥—Ä–∏ (State of Truth).
  - –¢—ñ–ª—å–∫–∏ –•–æ—Å—Ç —Å–ø—ñ–ª–∫—É—î—Ç—å—Å—è –∑ Gemini AI.
  - –û–±—Ä–æ–±–ª—è—î –ª–æ–≥—ñ–∫—É –±–æ—é —Ç–∞ —Ä–æ–∑—Å–∏–ª–∞—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞–º.
- **CLIENT (–ì—Ä–∞–≤–µ—Ü—å):**
  - –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –¥—ñ—ó (—á–∞—Ç, –∫–∏–¥–∫–∏, –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è) –•–æ—Å—Ç—É.
  - –û—Ç—Ä–∏–º—É—î –ø–æ–≤–Ω–∏–π –∑–ª—ñ–ø–æ–∫ —Å—Ç–∞–Ω—É (`STATE_SYNC`) –≤—ñ–¥ –•–æ—Å—Ç–∞.

### ‚è±Ô∏è –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –î—ñ–π
- **–£ –±–æ—é:** –î—ñ—ó –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –º–∏—Ç—Ç—î–≤–æ, –∞–ª–µ —Å—É–≤–æ—Ä–æ –∑–∞ —á–µ—Ä–≥–æ—é —ñ–Ω—ñ—Ü—ñ–∞—Ç–∏–≤–∏.
- **–ü–æ–∑–∞ –±–æ—î–º (Action Buffer):** –î—ñ—ó –≥—Ä–∞–≤—Ü—ñ–≤ –∑–±–∏—Ä–∞—é—Ç—å—Å—è —É "–±—É—Ñ–µ—Ä" (—á–µ—Ä–≥—É) –ø—Ä–æ—Ç—è–≥–æ–º ~3 —Å–µ–∫—É–Ω–¥ –∞–±–æ –¥–æ–∫–∏ –≤—Å—ñ –Ω–µ –ø–æ—Ö–æ–¥—è—Ç—å. –ü–æ—Ç—ñ–º –•–æ—Å—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î —ó—Ö –®–Ü –æ–¥–Ω–∏–º –ø–∞–∫–µ—Ç–æ–º. –¶–µ –¥–æ–∑–≤–æ–ª—è—î —É–Ω–∏–∫–Ω—É—Ç–∏ —Ö–∞–æ—Å—É, –∫–æ–ª–∏ 4 –≥—Ä–∞–≤—Ü—ñ –æ–¥–Ω–æ—á–∞—Å–Ω–æ –ø–∏—à—É—Ç—å "–Ø –≤—ñ–¥–∫—Ä–∏–≤–∞—é –¥–≤–µ—Ä—ñ".

---

## 6. –ê—É–¥—ñ–æ –°–∏—Å—Ç–µ–º–∞ (Procedural & Adaptive Audio)

- **Music:** –§–æ–Ω–æ–≤–∞ –º—É–∑–∏–∫–∞ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤ –≤ –æ–ø–∏—Å—ñ –ª–æ–∫–∞—Ü—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "—Ç–∞–≤–µ—Ä–Ω–∞", "–±—ñ–π", "—Ç–µ–º—Ä—è–≤–∞").
- **SFX (Sound Effects):**
  - –°–∏–Ω—Ç–µ–∑—É—é—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ —á–µ—Ä–µ–∑ **Web Audio API** (Oscillators/Gain Nodes).
  - –¶–µ –¥–æ–∑–≤–æ–ª—è—î –º–∞—Ç–∏ –∑–≤—É–∫–∏ –∫–∏–¥–∫–∞ –∫—É–±–∏–∫—ñ–≤, –∫–ª—ñ–∫—ñ–≤ —Ç–∞ —É—Å–ø—ñ—Ö—É –±–µ–∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è mp3-—Ñ–∞–π–ª—ñ–≤.

---

## 7. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è (Persistence)

- **LocalStorage:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —É –±—Ä–∞—É–∑–µ—Ä—ñ.
- **Google Drive:**
  - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `Google Drive API (v3)`.
  - –°—Ç–≤–æ—Ä—é—î JSON-—Ñ–∞–π–ª–∏ –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º `dnd_ai_save_`.
  - –î–æ–∑–≤–æ–ª—è—î –≥—Ä–∞—Ç–∏ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö (PC -> Tablet).

---

## 8. –ö—É–±–∏–∫–∏ (Dice Roller)

- **–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è:** CSS/SVG –∞–Ω—ñ–º–∞—Ü—ñ—è —à–µ–π–∫—ñ–Ω–≥—É.
- **–õ–æ–≥—ñ–∫–∞:** `Math.random()` (Client-side).
- **–ú–µ—Ä–µ–∂–∞:** –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–∏–¥–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –•–æ—Å—Ç—É, —è–∫–∏–π –ø–µ—Ä–µ—Å–∏–ª–∞—î –π–æ–≥–æ –≤ —á–∞—Ç —è–∫ —Å–∏—Å—Ç–µ–º–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
- **–¢—Ä–∏–≥–µ—Ä–∏:**
  - –†—É—á–Ω–∏–π –∫–∏–¥–æ–∫ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å.
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø–∏—Ç –≤—ñ–¥ –®–Ü (`request_roll` tool).
